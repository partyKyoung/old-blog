{"componentChunkName":"component---src-templates-blog-template-tsx","path":"/2018-07-24-nodejs-setting/","result":{"data":{"site":{"siteMetadata":{"title":"Kyoungah's dev blog.","author":"Kyoungah"}},"markdownRemark":{"id":"83794c33-a9d7-5ef1-ba19-fc4bb8aa77dd","excerpt":"Node.js 프로젝트를 만들고 Webpack 설정까지 해보자. 시작하기 전에 필요한 것 Node.js Node.js 공식사이트\n여기서 Node.js 를 설치할 수 있다. NPM 또는 Yarn NPM\nNPM은 Node.js Package Manger의 약자이다. Node.js…","html":"<p>Node.js 프로젝트를 만들고 Webpack 설정까지 해보자.</p>\n<h2>시작하기 전에 필요한 것</h2>\n<h3>Node.js</h3>\n<p><a href=\"https://nodejs.org/ko/\">Node.js 공식사이트</a>\n여기서 Node.js 를 설치할 수 있다.</p>\n<h3>NPM 또는 Yarn</h3>\n<p><a href=\"https://www.npmjs.com/\">NPM</a>\nNPM은 Node.js Package Manger의 약자이다. Node.js에서 사용가능한 모듈들을 패키지화시켜 모아놓은 곳 이다. npm으로 원하는 모듈들을 설치하고 관리할 수 있다.</p>\n<p><a href=\"https://yarnpkg.com/lang/en/\">Yarn</a>\nYarn은 의존하는 라이브러리가 많아지면 느려지고 설치하는 시기에 따라 다른 버전을 설치할 가능성이 있는 NPM의 단점을 보완하기 위해 나왔다. npm을 대체할 수 있다.</p>\n<p>NPM의 이슈는 NPM 최신버전에서 해결됐고 속도 차이점은 솔직히 난 잘 못느끼겠다. 이번에 Node.js를 공부하면서 Yarn이 써보고 싶어서 Yarn을 썼는데 딱히 NPM이랑 다른건 없는거 같으니 원하는걸 쓰면 되겠다.</p>\n<h2>작업환경 설정</h2>\n<p>es6 개발환경을 구축하기 위해 webpack이랑 babel을 사용할 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> init -y\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> --dev webpack webpack-cli babel-loader babel-core babel-preset-env</code></pre></div>\n<p>먼저 yarn init 또는 npm init 으로 package.json 파일을 생성해준 후 webpack과 babel 관련 모듈들을 깔아주자.</p>\n<h3>webpack.config.js</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> webpack <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"webpack\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> nodeExternals <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"webpack-node-externals\"</span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  target<span class=\"token punctuation\">:</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 기본은 web 이기 때문에 꼭 node로 맞춰줘야 한다.</span>\n  externals<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">nodeExternals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  entry<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    server<span class=\"token punctuation\">:</span> <span class=\"token string\">\"./src/server.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  output<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    filename<span class=\"token punctuation\">:</span> <span class=\"token string\">\"[name].js\"</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"build\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  module<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    rules<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.js$/</span><span class=\"token punctuation\">,</span>\n        exclude<span class=\"token punctuation\">:</span> <span class=\"token regex\">/(node_modules)/</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// babel-loader로 트랜스파일시 node_modules는 제외한다.</span>\n        use<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          loader<span class=\"token punctuation\">:</span> <span class=\"token string\">\"babel-loader\"</span><span class=\"token punctuation\">,</span>\n          options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            presets<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"babel-preset-env\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>server-side에서도 webpack을 사용할 수 있도록 webpack.config.js를 작성했다. webpack-node-externals은 node_modules를 빌드과정에서 제외시키는 역할을 한다.</p>\n<h3>src/server.js</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> http <span class=\"token keyword\">from</span> <span class=\"token string\">\"http\"</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> port <span class=\"token operator\">=</span> <span class=\"token number\">3000</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"server start!\"</span><span class=\"token punctuation\">,</span> port<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>간단하게 서버쪽 소스를 작성했다.</p>\n<h3>package.json</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">\"scripts\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"build\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"webpack --mode production &amp;&amp; node ./build/server.js\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>빌드와 실행을 동시에 하기 위해 script에 build 명령어도 넣어주면 설정은 끝났다.\nwebpack 4 버전 부터는 꼭 --mode (develop or production)를 설정해주어야한다.</p>\n<h2>npm run build</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5c1cf4102f723a2a587696146e34f1e6/08ba8/nodejs-setting-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.46280991735537%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABjklEQVQoz12SWVPCMBSF+y98dEEpVpStK6QbpNANqDQdkFEYxwf//y843kRh1IczaZPcr+fcW20SpVgUG1KNeb5BxEuwOEU4K2BPZnD9BFFSwmGc9jN49B5Mc4TyHtXK85EbQ3K8YA4tmOVYVlsUJJ6uUdIqL8oiCR46oVLf8tEzGUZOpDSwA/RNH51HG3rXOksLeaFgUmJ3wHb/jmZ3xMvrB9Ky/i4gdZ4c9XxP60knWPvBPEtjYYaybMCTFfJlA5eiyS/LiH1yYZIbw6AifYi2McK13kerM8Dt/VABfrtTDg3PB6s3yHZ72AFXULE9IFlUOB4+ESYFWozh2hujazOsN3vkq0a5fxyMcWf8hWpPUw5TVLDXK1hhQkABPl/hNvChZxytJMZVFuOGB2h7DONwQUOIVORT3D/AIMpQ5DVE84aGnDUvRxTkYLaukQgaVCVQLRn0Z46L1wyXros7fXDu2X+oZlOv5j+/TVoKTMmd2L6h23NhOTFG1MehY1FsHzeTCdo9GsQDQf717qQvDHMQwCiIiyUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"실행 결과\"\n        title=\"실행 결과\"\n        src=\"/static/5c1cf4102f723a2a587696146e34f1e6/b9e4f/nodejs-setting-1.png\"\n        srcset=\"/static/5c1cf4102f723a2a587696146e34f1e6/cf440/nodejs-setting-1.png 148w,\n/static/5c1cf4102f723a2a587696146e34f1e6/d2d38/nodejs-setting-1.png 295w,\n/static/5c1cf4102f723a2a587696146e34f1e6/b9e4f/nodejs-setting-1.png 590w,\n/static/5c1cf4102f723a2a587696146e34f1e6/f9b6a/nodejs-setting-1.png 885w,\n/static/5c1cf4102f723a2a587696146e34f1e6/08ba8/nodejs-setting-1.png 968w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">실행 결과</figcaption>\n  </figure>\n빌드도 잘되고 실행도 잘된다. 작업환경을 끝냈으니 이제 본격적으로 Node.js 공부를 해보자.</p>\n<p><a href=\"https://github.com/partyKyoung/nodejs-study\">해당 포스트에 작성된 모든 소스는 여기서 확인할 수 있다.</a></p>","frontmatter":{"title":"Node.js 작업환경 설정하기","date":"2018년 07월 31일"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2018-07-24-nodejs-setting/"}}}