{"componentChunkName":"component---src-templates-blog-template-tsx","path":"/2020-03-18-json-web-token/","result":{"data":{"site":{"siteMetadata":{"title":"Kyoungah's dev blog.","author":"Kyoungah"}},"markdownRemark":{"id":"ef8adc92-e08a-57e8-ac96-ee38f65b44e0","excerpt":"JWT(Json Web Token) 두 개체 간의 정보를 안전하게 JSON 객체로 전송하기 위한 간결하고 독립적인 방법을 정의하는 개방형 표준(RFC 7519) 정보는 디지털 서명이 되어 있기 때문에 신뢰할 수 있다. HMAC 알고리즘을 사용한 비밀키 또는 RAS이나 ECDSA…","html":"<h2>JWT(Json Web Token)</h2>\n<ul>\n<li>\n<p>두 개체 간의 정보를 안전하게 JSON 객체로 전송하기 위한 간결하고 독립적인 방법을 정의하는 개방형 표준(<a href=\"https://tools.ietf.org/html/rfc7519\">RFC 7519</a>)</p>\n<ul>\n<li>정보는 디지털 서명이 되어 있기 때문에 신뢰할 수 있다.</li>\n<li>HMAC 알고리즘을 사용한 비밀키 또는 RAS이나 ECDSA를 사용하는 공개 / 개인키 쌍을 사용하여 서명할 수 있다.</li>\n</ul>\n</li>\n</ul>\n<h2>언제 JWT를 사용할 수 있을까?</h2>\n<ul>\n<li>\n<p>인증</p>\n<ul>\n<li>JWT를 사용하는 가장 흔한 시나리오.</li>\n<li>유저가 로그인을 했을 때, 서버에서 사용자의 정보를 담은 토큰을 발급한다. 이 후로는 유저가 서버에 요청을 할 때마다 JWT가 포함된다. 유저는 해당 토큰으로 서비스 및 자원에 접근할 수 있다.</li>\n</ul>\n</li>\n<li>\n<p>정보 교환</p>\n<ul>\n<li>JWT는 두 개체 사이에서 안전하게 정보를 전달할 수 있는 좋은 방법이다.</li>\n<li>서명이 되어 있기 때문에 발신자가 누구이고 위조가 되진 않았는지, 정보 역시 조작되진 않았는지 검증할 수 있다.</li>\n</ul>\n</li>\n</ul>\n<h2>JWT 구조</h2>\n<p>JWT는 (.)으로 구분하여 세부분으로 구성되어 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">xxxxx.yyyyy.zzzzz</code></pre></div>\n<p>첫번째 부분은 헤더(Header), 두번째 부분은 내용(Payload), 세번째 부분은 서명(Signature)이다.</p>\n<h3>Header</h3>\n<p>헤더(Header)는 두가지 요소로 구성되어 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  alg: &quot;HS256&quot;,\n  typ: &quot;JWT&quot;\n}</code></pre></div>\n<ul>\n<li>typ: JWT 같은 토큰의 타입을 지정한다.</li>\n<li>alg: 헤싱 알고리즘. 주로 HMAC SHA256 또는 RSA 알고리즘을 사용한다.</li>\n</ul>\n<p>이 정보들을 Base64로 인코딩한다.</p>\n<h3>Payload</h3>\n<p>내용(Payload)에는 클레임(Claim)을 담고 있다. 클레임이란 사용자에 대한 프로퍼티나 속성을 말하며 name/value의 한쌍으로 이루어져 있다.\n클레임에는 3가지 타입이 있다.</p>\n<h4>등록된 (registered) 클레임</h4>\n<p>정보교환에 응하도록 미리 정의된 클레임. 필수는 아니지만 사용을 권장하고 있다.</p>\n<ul>\n<li>iss: 토큰 발급자 (issuer)</li>\n<li>sub: 토큰 정보 (subject)</li>\n<li>aud: 토큰 대상자 (audience)</li>\n<li>\n<p>exp: 토큰의 만료시간 (expiration)</p>\n<ul>\n<li>현재 시간 보다 이후로 설정되어 있어야 한다.</li>\n</ul>\n</li>\n<li>\n<p>nbf: Not Before 클레임</p>\n<ul>\n<li>이시간 이전에는 토큰을 처리하지 않아야 함을 의미한다.</li>\n</ul>\n</li>\n<li>iat: 토큰이 발급된 시간 (issued at)</li>\n<li>\n<p>jti: JWT ID</p>\n<ul>\n<li>JWT의 고유 식별자로서 중복처리 방지를 위해 사용한다.</li>\n</ul>\n</li>\n</ul>\n<h4>공개 (public) 클레임</h4>\n<p>공개 (Public) 클레임의 이름은 마음대로 정의할 수 있으나 충돌이 방지된 이름을 가지고 있어야한다. 충돌을 피하기 위해서는 클레임 이름을 IANA Json Web Token Registry 안에 정의되어 있거나 충돌 방지 namespace가 포함된 URI로 정의해야 한다.</p>\n<h4>비공개 (private) 클레임</h4>\n<p>등록된 클레임도 공개 클레임도 아닌 클레임. 정보를 공유하기 위해 양측간에(클라이언트 / 서버) 협의하에 위해 사용되는 클레임 이름이다.</p>\n<p>Payload를 Base 64로 인코딩하면 JWT의 두번째 부분이 된다.</p>\n<p>-> 서명이 된 토큰은 정보 위변조는 막을 수 있으나 누구나 읽을 수 있기 때문에 절대로 암호화되지 않은 payload나 header에 비밀 정보를 넣으면 안된다.</p>\n<h3>Signature</h3>\n<p>Header의 인코딩값과 Payload의 인코딩값, 비밀키, Header에 정의된 헤싱 알고리즘으로 서명을 생성한다.</p>\n<p>예를 들어 HMAC SHA256 알고리즘을 사용하면 Signature은 다음과 같이 생성된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">HMACSHA256(\n  base64UrlEncode(header) + &quot;.&quot; +\n  base64UrlEncode(payload),\n  secret)</code></pre></div>\n<p>이 서명은 메시지가 도중에 바뀌지는 않았는지 인증하는데 사용되며 비밀키로 서명된 토큰의 경우 발신자도 인증할 수 있다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABKElEQVQoz42SzXKDMAyEef8H7KWlOZSUQkgpYNnYlrUVhnSagf4w82EfpPVq7eKtafByrmBnh5gYCYDcsfyBuq5RPpUgQ/DeZ0RkR8E0IzY9+DoidgO4GyEXpdX9ZUI0KYsSEYwluHmGc3p4jEgp3cHMKMLAoFMEVRHTc4QpA7pzUEcefRvBJKvLpJCDGIufvkW0CCwYvDILPpRe6YKukcFb4TKKV2feWqQYVDvt3H05XIq3tv2ROZc1R2cd7DCDnSCxHOaXBVPamuS46OZwuS0xQGi10cqhhzzy96bfBGMIOrbL497cH2Z452I3sWx9mu84oWo7TJOB1SxJsQf8W7DXG37oLB6vhNM7oR8NjNnzt+A2niGLZjB4HSxqZdQHnt8mrWveq+AnkIgRZltDLC8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JWT Example\"\n        title=\"JWT Example\"\n        src=\"/static/c9a9248fcecfd3236f241fb2df9ce34c/5a190/json-web-token-1.png\"\n        srcset=\"/static/c9a9248fcecfd3236f241fb2df9ce34c/772e8/json-web-token-1.png 200w,\n/static/c9a9248fcecfd3236f241fb2df9ce34c/e17e5/json-web-token-1.png 400w,\n/static/c9a9248fcecfd3236f241fb2df9ce34c/5a190/json-web-token-1.png 800w,\n/static/c9a9248fcecfd3236f241fb2df9ce34c/38a65/json-web-token-1.png 1075w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">JWT Example</figcaption>\n  </figure>\nHeader 인코딩값, Payload 인코딩값, 서명을 .로 구분하면서 모두 합치면 JWT 토큰이 완성된다.</p>\n<p><a href=\"https://jwt.io/\">JWT 공식 사이트</a>에서 JWT 토크를 생성 및 확인해볼 수 있다.</p>\n<h2>Reference</h2>\n<blockquote>\n<ul>\n<li><a href=\"https://jwt.io/introduction/\">Introduction to JSON Web Tokens</a></li>\n<li><a href=\"https://velopert.com/2389\">[JWT] JSON Web Token 소개 및 구조</a></li>\n<li><a href=\"https://icarus8050.tistory.com/12\">JWT에 대한 간단 정리</a></li>\n<li><a href=\"https://bcho.tistory.com/999\">REST JWT(JSON Web Token)소개 - #1 개념 소개</a></li>\n</ul>\n</blockquote>","frontmatter":{"title":"JWT(Json Web Token)","date":"2020년 03월 18일"},"fields":{"slug":"/2020-03-18-json-web-token/"}}},"pageContext":{"slug":"/2020-03-18-json-web-token/"}}}