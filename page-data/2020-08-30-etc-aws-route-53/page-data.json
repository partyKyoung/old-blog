{"componentChunkName":"component---src-templates-blog-template-tsx","path":"/2020-08-30-etc-aws-route-53/","result":{"data":{"site":{"siteMetadata":{"title":"Kyoungah's dev blog.","author":"Kyoungah"}},"markdownRemark":{"id":"c8f2deb0-71b0-5619-a7d2-1f467ce4e2e4","excerpt":"AWS Route 53 높은 가용성과 확장성이 뛰어난 클라우드 Domain Name System (DNS) 웹 서비스. 일반적인 DNS 기능 + 모니터링 기능 + 서버 로드 밸런싱 기능 + 글로벌 서버 로드 밸런싱 기능을 제공한다. DNS (Domain Name System…","html":"<h2>AWS Route 53</h2>\n<p>높은 가용성과 확장성이 뛰어난 클라우드 Domain Name System (DNS) 웹 서비스. 일반적인 DNS 기능 + 모니터링 기능 + 서버 로드 밸런싱 기능 + 글로벌 서버 로드 밸런싱 기능을 제공한다.</p>\n<blockquote>\n<p>DNS (Domain Name System): 네트워크에 연결된 호스트들은 각각 IP 주소들을 가지고 있다. 이 IP 주소는 사람이 이해하고 기억하기 어렵기 때문에 각 IP 주소마다 도메인 이름을 부여한다. DNS는 특정 도메인에 대한 요청이 들어오면 도메인에 대한 IP 주소를 반환해준다. 반대로 IP 주소에 대한 도메인 이름을 반환해 줄 수도 있다.</p>\n</blockquote>\n<p>Route 53은 프리티어 대상이 아니므로 매달 사용한 만큼 요금이 빠져나간다. 다행히 요금은 저렴한 편이다.</p>\n<h2>Route 53 도메인 등록</h2>\n<p>AWS에서 사용하고 있는 서비스에 도메인을 등록하기 위해서는 먼저 Route 53 서비스에 도메인을 등록해야 한다. 도메인은 AWS 서비스에서도 구매할 수 있고 카페 24나 호스팅kr 같은 국내 호스팅 서비스에서도 구매할 수 있다. 나는 국내 호스팅 서비스에서 토이 프로젝트에 사용할 wolfonair.com 도메인을 구입했다. 이 도메인을 AWS Route 53 서비스에 등록해보자.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 522px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABF0lEQVQoz5WS2U7DMBBF8/9fxlIh4KERRSRkrZNmXxxv6WVsBGIrBUvnwdbMmbE93jzPaLsOXdejbVtMtBdCYFmW/0E51uXNnOPi8gq3d/fYbG6QZTmMMZBSvqOU+pW3GE4uz5o/Lk0y8wWt9XkoznbqWXMYhPB9H0mSYF2tQMFQ0OqEmsoc8ZclyeUJancXpdgGER7jDM/7EmFeIGIHpIcaSVmh4xKjNBik/oY974VCv6hXIRcSbFzAqhoPYYysrMH1kVgxK4uhJEoUP6EwkbCdOIKiIaG2V5Z4YjWugwLbpEDK2CfyskRBxYqqOgk7VKhoQuxt3Rva7nZxiijfO0mS544oy1xCNwxoehqrEzQ0dsM4ut9+ARXuZrlK1+agAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AWS 서비스 메뉴\"\n        title=\"AWS 서비스 메뉴\"\n        src=\"/static/f360c468c9c04e35ee20e0e09feef9e8/29492/aws-route-53-1.png\"\n        srcset=\"/static/f360c468c9c04e35ee20e0e09feef9e8/772e8/aws-route-53-1.png 200w,\n/static/f360c468c9c04e35ee20e0e09feef9e8/e17e5/aws-route-53-1.png 400w,\n/static/f360c468c9c04e35ee20e0e09feef9e8/29492/aws-route-53-1.png 522w\"\n        sizes=\"(max-width: 522px) 100vw, 522px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">AWS 서비스 메뉴</figcaption>\n  </figure></p>\n<p>AWS 서비스 메뉴 검색창에서 Route 53을 검색하거나 메뉴 목록에서 Route 53을 클릭하여 Route 53 대쉬보드 창으로 이동한다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6klEQVQY042Q246DMAxE8///1y5tRbhsoVCu4RZCgFnb1Ur7uA+W4tFxZmx1DQI8whCX6xei9BudGWGGAeM0YRg/79/6j6bctqHvexH9vmPzO47zQEfaPM84zxP7cWB1Dr0x8sFOHBfzXdfDWivcRLwyBMVxgpTSGTPA0WBRFEiSFFmWo207rKtDlucItYaO4j9cCa0jYTmdXVeoiIDb/YHgdsfrVYgzJ2a9LN9YyJ2TVHUtXETmy2KFe1eVzD2fmaTkUpv3qJsWTdtio/U99QetyBqfgddljd2ruqEko/RcfAbWpnkRAz7HD8aKfN3/aRWNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DNS 관리\"\n        title=\"DNS 관리\"\n        src=\"/static/87941b43b4d7588ccdc288b27ba0b44c/5a190/aws-route-53-2.png\"\n        srcset=\"/static/87941b43b4d7588ccdc288b27ba0b44c/772e8/aws-route-53-2.png 200w,\n/static/87941b43b4d7588ccdc288b27ba0b44c/e17e5/aws-route-53-2.png 400w,\n/static/87941b43b4d7588ccdc288b27ba0b44c/5a190/aws-route-53-2.png 800w,\n/static/87941b43b4d7588ccdc288b27ba0b44c/25c1c/aws-route-53-2.png 1047w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">DNS 관리</figcaption>\n  </figure></p>\n<p>DNS 관리에서 호스팅 영역 생성 버튼을 클릭한다.</p>\n<p>호스팅 영역이란 레코드의 컨테이너이다. 레코드에는 특정 도메인과(ex: example.com)과 하위 도메인(ex: api.example.com, cdn.example.com)의 트래픽을 라우팅하는 방식에 대한 정보가 포함된다. 호스팅 영역과 해당 도메인의 이름은 동일하다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABtUlEQVQ4y42Ti3KbMBBF+f9P66RN0tZ51bGd+IF5GQlhkMBws7sCT5zQtJo5sxKIq92rJXh4fMLNz1/4cX2D69tbfLv6jm2cQRcFlNZQHL9AfyBQSiHc74kIaZbBlCXKqkZtiXqI1k6vh2dVVZ0J8jzH79kdZsTzYoGcDsgOBxI/DDFDkqR+nV2uGa6iaZozQVX7U6xrcep6tG17seGf0P7T6XQm4BLnzwvMFy9Icw1jDJxrMDX6vr9gakiGMZUQRTEKMpXXDJ9uncORfOHItJQBVzDGbhDt30XJkL0R75QhMQtrHQm2cCxK87Gcr7K+EFyuXvD0Z44ozaGp5KIw1AIeFuSNXdeRx55x3k9laKkFOH1HJf2Pb+PH3SD8SbCinjseK8GYUvzrhtNH2CvJjksfM6T5pId8EbsogamsmC0XYD21+GnFz7+NTx5qyuxuneB+ucbjaoNlmCDMDTapQqJLFJT1dhciihOhHizi/hOhD3YExjbYaovZciM8vIbYqaOgXCdlxSS0el1jvdmK6H4QnuxDw95Reab2FFS6zOkgU1v5cOxDvjj/H3sr5Bm1lpN3Pr4BnIQ96z83rg0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"호스팅 영역 구성\"\n        title=\"호스팅 영역 구성\"\n        src=\"/static/ed78ccde106a79edd5e51195587fd8d5/5a190/aws-route-53-3.png\"\n        srcset=\"/static/ed78ccde106a79edd5e51195587fd8d5/772e8/aws-route-53-3.png 200w,\n/static/ed78ccde106a79edd5e51195587fd8d5/e17e5/aws-route-53-3.png 400w,\n/static/ed78ccde106a79edd5e51195587fd8d5/5a190/aws-route-53-3.png 800w,\n/static/ed78ccde106a79edd5e51195587fd8d5/31aff/aws-route-53-3.png 823w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">호스팅 영역 구성</figcaption>\n  </figure></p>\n<p>소유하고 있는 도메인 이름을 입력한다. 설명은 입력해도 되고 그냥 냅둬도 된다.</p>\n<p>퍼블릭 호스팅 영역은 누구나 인터넷에서 도메인을 입력하여 트래픽을 라우팅 할 수 있고 프라이빗 호스팅 영역은 AWS VPC 내에서만 사용할 수 있다.\n때문에 프라이빗 클라우드를 만드는게 아니면 유형 부분은 따로 건드릴 필요가 없고 퍼블릭 호스팅 영역으로 그대로 두면 된다.</p>\n<p>쭉 내려서 호스팅 영역 생성 버튼을 눌러주면 호스팅 영역 생성이 완료된다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABrElEQVQoz21TW3KcMBDc2+cnN8gJ/JHvHGRtx8/KerdsMOIhJEAClu1MD2BcLk/VlDSjUaunJe3eswzOe7QhIvar94gxzq7xgH4YEYdhW1tq+yUOIcD7Brub2784vSZITAlra5RlpV5VFnXtdCxzgyJNUGTv85q1c76qkBcFnPMYxxG+EUAucNK2Lbqu0zk3/Tsc8XI8IctLVH9+obz6gfL3T7S2QBd7re26gE6YkeEGKKwaAfPiThJ065wucsMgbQ6+wuhKTI3FKPF4PmOaJgUJC2AhJLxIt2OgrQp9nqYsRYv1ZLKNoh9ZFVLHHGvKam6b7VLHWUMBZGCMQZqmH8W2nllTw9e3RPJBD32TebeIb0yOPC80T6bcq4CXywVnaWEczzqu8edx9dXI6nB4EY2POJ5OCkxrhYwCWrm1TFjydBpZMt+LXkGeE40xdaNRhv31Dfb7a9zd3Usn9SfApfirT9/lFkDqlWVGSZg8F8ZuA+REGUpBWBg2csOzDLM2X421ZJgkqbpeKJ+R7N+tLz+sPyNuvyR85LcaPiNeyOPTM+4fHnWkprxAPrX/0FlOoZpHDVAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"호스팅 영역 구성\"\n        title=\"호스팅 영역 구성\"\n        src=\"/static/55a781e29771317d2da6f44bd4db5373/5a190/aws-route-53-4.png\"\n        srcset=\"/static/55a781e29771317d2da6f44bd4db5373/772e8/aws-route-53-4.png 200w,\n/static/55a781e29771317d2da6f44bd4db5373/e17e5/aws-route-53-4.png 400w,\n/static/55a781e29771317d2da6f44bd4db5373/5a190/aws-route-53-4.png 800w,\n/static/55a781e29771317d2da6f44bd4db5373/63ec5/aws-route-53-4.png 812w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">호스팅 영역 구성</figcaption>\n  </figure></p>\n<p>생성이 완료되면 NS(네임서버) 레코드와 SOA(권한시작) 레코드가 자동 생성된다. 이 네임서버가 등록한 도메인이 사용할 네임서버이기 때문에 등록한 도메인의 네임서버를 Route 53의 네임서버로 교체해주어야 한다.</p>\n<blockquote>\n<p>네임 서버: DNS를 운영하는 서버. 특정 도메인이 어떤 IP와 연결되었다는 것을 기록하고 이것을 다른 DNS들에게 전파하는 역할을 한다. 예를 들어 abc.com 이라는 도메인이 있으면 이 도메인을 192.168.0.1 이라는 아이피를 가진 서버와 연결을 해준다.</p>\n</blockquote>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 745px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABFElEQVQoz31R2W6DMBDk/38xfSkEgw2knD4IMNlZaJSHqkgr4z3mWGdt16FpGjyfT/z3bdumPTxjjEgpYd93DebSumo9SzFgniaMwwA/z/DLohEkWiGaJB+8Ryf/zlr0jweK/BtftxsqU8LWNe5FAXO/o3HuBPyRJgIOfa9NlTEaRZ6ja1sdIgmJna3fdRI2zopDh2kcEYNHRjuUv4n0ZfGoRYUTJq5hFIBZgBxXclm11p61cVKbzEWZ9yGo9ew4DoTrMotlI8y1KOJgL4onAf3dMYeqqtJaK8rZ/xm6QyokC5fLYQKWZamDnTzYKFbegLJL1ow5Qdn/GQpIZYvYSikqMNWe53knMwHX6xUJqjb/CGK9AFUIGawLvjY7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"네임서버 수정\"\n        title=\"네임서버 수정\"\n        src=\"/static/f18f42acc34b131d5267639506807d17/7e509/aws-route-53-5.png\"\n        srcset=\"/static/f18f42acc34b131d5267639506807d17/772e8/aws-route-53-5.png 200w,\n/static/f18f42acc34b131d5267639506807d17/e17e5/aws-route-53-5.png 400w,\n/static/f18f42acc34b131d5267639506807d17/7e509/aws-route-53-5.png 745w\"\n        sizes=\"(max-width: 745px) 100vw, 745px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">네임서버 수정</figcaption>\n  </figure></p>\n<p>도메인을 구입한 사이트로 이동하여 구입한 도메인의 DNS 관리 화면으로 이동한 후 네임서버 항목에 Route 53의 네임서버 4개를 입력하고 확인 또는 저장 버튼을 누르면 네임서버 수정이 완료 된다.</p>\n<p>Route 53을 이용하면 S3, CloudFront, EC2, ELB 등 몇몇 AWS 리소스에 도메인을 쉽게 연동할 수 있다. Route 53에 도메인 등록 하는 작업을 완료 했으니 기존에 사이드 프로젝트로 사용하고 있던 CloudFront, Api gateway에 도메인을 한번 연동해보자.</p>\n<h2>AWS Certificate Manager 설정</h2>\n<p>Route 53에 도메인을 등록하면 AWS Certificate Manageer을 사용하여 무료로 SSL 인증서를 발급받을 수 있다.</p>\n<blockquote>\n<p>SSL 인증서: 클라이언트와 서버간의 통신을 제3자가 보증해주는 전자화된 문서. 웹서버와 웹사이트에서 이루어지는 모든 정보전송을 https 암호화 프로토콜을 통해 안전하게 전송되도록 하는 인증서이다.</p>\n</blockquote>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUElEQVQI16XMQQqAIBRFUfe/zwrNFCpQ/1dvtoAIanAGlwfPhCOTKpylc+TGPuIPM80Lty1EsiiiDW0drQ9eNrM6h7UW7z0xjtOUEJFPSilc537p/nVSRrkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AWS 서비스 메뉴\"\n        title=\"AWS 서비스 메뉴\"\n        src=\"/static/d3a9f2ea1f66621c377268b424fa7d13/5a190/aws-route-53-6.png\"\n        srcset=\"/static/d3a9f2ea1f66621c377268b424fa7d13/772e8/aws-route-53-6.png 200w,\n/static/d3a9f2ea1f66621c377268b424fa7d13/e17e5/aws-route-53-6.png 400w,\n/static/d3a9f2ea1f66621c377268b424fa7d13/5a190/aws-route-53-6.png 800w,\n/static/d3a9f2ea1f66621c377268b424fa7d13/bcb8c/aws-route-53-6.png 879w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">AWS 서비스 메뉴</figcaption>\n  </figure></p>\n<p>AWS 서비스 메뉴에서 Certificate Manager을 검색하여 Certificate Manager 메뉴 대시보드 화면으로 이동한다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABDUlEQVQY02VPQUvDMBjN7/YqCN5EYXevepBeByLCThtMZW5jNiuU2SJL06S0tW225tlEu7XzwZcveS/fSx5Bg6pSoK6L+WKJYCsMBa01NI6w578ymIzHWPsBqtqqB56YhUcRZu8L0PkU4s2Brncwetegu1dVhaubAdzRPeqvV/uwrvdWJ78/LPH49IzR8AH7l1ugVgeTbm9BqYvzi0tMnAEQzXoaieMYnPPmEsVq9QF/E4DHAlmW9czKsoQQAlJKRE0iz1vD8z+x5RKy4RmLUBQFSBiGSJLEDhRFiTzPkaap7d2YhmOM2YdMGd3M5HlmNeOhlAJpw8TZDmd3FMvwuxfhNG4LZ8pwPdz8438AREXJRbba+DAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"인증서 프로비저닝 선택\"\n        title=\"인증서 프로비저닝 선택\"\n        src=\"/static/16275d95e628b0bad20297f2207c4627/5a190/aws-route-53-7.png\"\n        srcset=\"/static/16275d95e628b0bad20297f2207c4627/772e8/aws-route-53-7.png 200w,\n/static/16275d95e628b0bad20297f2207c4627/e17e5/aws-route-53-7.png 400w,\n/static/16275d95e628b0bad20297f2207c4627/5a190/aws-route-53-7.png 800w,\n/static/16275d95e628b0bad20297f2207c4627/a9965/aws-route-53-7.png 1171w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">인증서 프로비저닝 선택</figcaption>\n  </figure></p>\n<p>아무 인증서도 발급받지 않은 상태라면 위의 이미지와 같은 화면이 뜬다. 여기서 인증서 프로비저닝 항목 밑의 시작하기 버튼을 클릭한다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAj0lEQVQY052QWQ6DMAxEc/+j9RL8U4hoFpus0ziopVIplRh57J9o/ByltcY8T/DeI4SA/6qtaqtjKw4J43jHY1lgjHnbOg9jHYioL3PObZMj1lh68GFgaU0eC12MEcQMZoKltTki59ydUtpmLiil/uRX/YQLEprX6SIBk0WqnvzHmb/Cd8Lr+gwfphW3weEJtIDZ29CMP7oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"공인 인증서 요청 선택\"\n        title=\"공인 인증서 요청 선택\"\n        src=\"/static/a3d30192740ebf60b905a1f6666d6f35/5a190/aws-route-53-8.png\"\n        srcset=\"/static/a3d30192740ebf60b905a1f6666d6f35/772e8/aws-route-53-8.png 200w,\n/static/a3d30192740ebf60b905a1f6666d6f35/e17e5/aws-route-53-8.png 400w,\n/static/a3d30192740ebf60b905a1f6666d6f35/5a190/aws-route-53-8.png 800w,\n/static/a3d30192740ebf60b905a1f6666d6f35/c1b63/aws-route-53-8.png 1200w,\n/static/a3d30192740ebf60b905a1f6666d6f35/46115/aws-route-53-8.png 1290w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">공인 인증서 요청 선택</figcaption>\n  </figure></p>\n<p>공인 인증서 요청 항목을 선택한 후 인증서 요청 버튼을 클릭한다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAA10lEQVQoz5VQ7Q6CMAzk9X0f38XwhxhlfC+ASGCDca41BST+ocml1y69XhcURYE0TaGUQt/3mOcZ0zQxhB97e1DPWgvnHPI8R9A0DYslSfLNKkEcx1xLTxZSf19Lj6C1ZuEAPrIsQxiGLFBVFWgJoa5rtG3LLsgBgVxJFk6QYMGu61iUhmmLnEEDy7LgTLAguYmiCPHzgdL/qTg6uvmH33e3OSzKCs9MQ9cvGDNiHDcYYzAMw8qPb8Kt5wGdJGc5n84duAXNWv+Vq+BXdONnQHM39cblescHSH9uJNVmFNsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"도메인 이름 추가\"\n        title=\"도메인 이름 추가\"\n        src=\"/static/5c4f517f3bdc9bcf517471dd83a1c15f/5a190/aws-route-53-9.png\"\n        srcset=\"/static/5c4f517f3bdc9bcf517471dd83a1c15f/772e8/aws-route-53-9.png 200w,\n/static/5c4f517f3bdc9bcf517471dd83a1c15f/e17e5/aws-route-53-9.png 400w,\n/static/5c4f517f3bdc9bcf517471dd83a1c15f/5a190/aws-route-53-9.png 800w,\n/static/5c4f517f3bdc9bcf517471dd83a1c15f/587b0/aws-route-53-9.png 970w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">도메인 이름 추가</figcaption>\n  </figure></p>\n<p>도메인 이름 항목에 Route 53에 등록한 도메인을 입력한다. 하위 도메인도 사용하려면 '*.도메인 이름' 으로 등록해주면 된다. 도메인 입력이 완료 되었으면 확인 버튼을 클릭한다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6klEQVQoz51RW07EMAzM/a/AUfjgChyh28dWVQt9JNuSxMlQW3iJVssPlkZ2xqlnnJq6rtF1Hbz3ICLEGJ9Ce5pDCPINQ2vumfpywTAMaJoGVVWhbVsR4DOLKc8cZ+XHccS6rliWBdu2Sc1DzeEDnHOiypFzxmMwp/yzfhlm/6JT/XpXUpTq1lpB2Z/nGfZ24MMG7J5YSsQMUUTf93JJ30ah7/MnIsHHBEr5voXhh5ymSRypm9Jl6Y6z3nOnu/kWf9wVK+vklJL8Jc1aP6LkSc4J+czsdPfpd+B/Ip2rHiHBrZ94fb/i5a3DN1XHbZ3lsMJnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"검증 방법 선택\"\n        title=\"검증 방법 선택\"\n        src=\"/static/d2430eacd27874283c573c2ed8b90b3f/5a190/aws-route-53-10.png\"\n        srcset=\"/static/d2430eacd27874283c573c2ed8b90b3f/772e8/aws-route-53-10.png 200w,\n/static/d2430eacd27874283c573c2ed8b90b3f/e17e5/aws-route-53-10.png 400w,\n/static/d2430eacd27874283c573c2ed8b90b3f/5a190/aws-route-53-10.png 800w,\n/static/d2430eacd27874283c573c2ed8b90b3f/587b0/aws-route-53-10.png 970w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">검증 방법 선택</figcaption>\n  </figure></p>\n<p>DNS 검증 항목을 선택한 후 다음 버튼을 클릭한다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAlklEQVQY05WPyw4CIQxF+f/v8Ufczt4NC8MjIK9SvZ00GcxotMlJL6W9FGOtZVBr5dbaAmrHuurah0BEPOdcMCklds5xCIFjjKJRg/beL3c4S05NoDczMcw5y5AWsEEpRTQ2+DcMDPAq8hhDUN17P/2WgkCSx18MmrshvqTbaOMxPhnuvWu/+WXoG49GXHLi7eb4cr3zE92q1/z6ZOAnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"태그 추가\"\n        title=\"태그 추가\"\n        src=\"/static/06101241d48d93f8e388dd1919a2f042/5a190/aws-route-53-11.png\"\n        srcset=\"/static/06101241d48d93f8e388dd1919a2f042/772e8/aws-route-53-11.png 200w,\n/static/06101241d48d93f8e388dd1919a2f042/e17e5/aws-route-53-11.png 400w,\n/static/06101241d48d93f8e388dd1919a2f042/5a190/aws-route-53-11.png 800w,\n/static/06101241d48d93f8e388dd1919a2f042/0fb99/aws-route-53-11.png 965w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">태그 추가</figcaption>\n  </figure></p>\n<p>태그 추가는 필수가 아니라 그냥 무시하고 검토 버튼을 눌러 다음 화면으로 넘어가도 상관없다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvklEQVQoz6VSyw6DMAzr/3/LbvuMHfYFO04gVpV3W5UWD4PKAdC0QiQfGkeJ41QURQFrLZxzCCHMGMfxNERVVcjzHG3bIsalhlJKZFmGpmlQ1zWMMWvTM80FV/TeYxiGGXxz/fgmlxJim+AUpdRsAVVrrdMa0sOu634WJa1cliXoY/SQ6jiEXrIg9eo7D4m4LrnUEEdJquv7fj1IvPjeioULE3xYII5k/+vfxO4VXvnE1gVYo/F6K9weH9yfEl9NCGTA1l9gWwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"검토\"\n        title=\"검토\"\n        src=\"/static/ceb9c2084458d28aed8f62ca296a733a/5a190/aws-route-53-12.png\"\n        srcset=\"/static/ceb9c2084458d28aed8f62ca296a733a/772e8/aws-route-53-12.png 200w,\n/static/ceb9c2084458d28aed8f62ca296a733a/e17e5/aws-route-53-12.png 400w,\n/static/ceb9c2084458d28aed8f62ca296a733a/5a190/aws-route-53-12.png 800w,\n/static/ceb9c2084458d28aed8f62ca296a733a/e4a12/aws-route-53-12.png 963w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">검토</figcaption>\n  </figure></p>\n<p>실수한 부분이 있는지 잘 확인한 후 없으면 확인 및 요청 버튼을 클릭한다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABTUlEQVQoz22Ry3LCMAxF/f+rfk53/YtuCoUSJontxCFv52HfSgow0OKZE11Z8lXGVodixE532JsOtp1gWi+wth3nN/y9zrEcVrjxmbJfoNJ6wldaYpc5nIsaJ1MJib3gXDaifxjtkFD9qEuKFzGofCTCxhQlV4OfEQGs9FnClT+aayv1hIe+iQp+DhsLxxW5KaC01sjSFNYaWGPAeWEtjNGkcxSFlX3O8zyDoTrjyhJd1xEt2rZFVTk0TQ2VZZmYWFvQIXPHiikNuJJrNsyF78MRzjn0fX817cR0HEeoc5JAU1NPk7z3mKbpH7zPzZ70QH022aOjvxmGQUy3OEhUth5R1AMu/YxlDTKpaRqBNU8PgW/vtugS42P+vNRMJgvdNEc+uCwL5nkWWDO8H2O8Ex70jYkepqeXVjJR4BBfTo0vDG6sYTvz8enw9n7CL88Gtnrt3L7DAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"검증 화면\"\n        title=\"검증 화면\"\n        src=\"/static/45aba4b312a28e36f3104b88fe3cef97/5a190/aws-route-53-13.png\"\n        srcset=\"/static/45aba4b312a28e36f3104b88fe3cef97/772e8/aws-route-53-13.png 200w,\n/static/45aba4b312a28e36f3104b88fe3cef97/e17e5/aws-route-53-13.png 400w,\n/static/45aba4b312a28e36f3104b88fe3cef97/5a190/aws-route-53-13.png 800w,\n/static/45aba4b312a28e36f3104b88fe3cef97/587b0/aws-route-53-13.png 970w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">검증 화면</figcaption>\n  </figure></p>\n<p>도메인이 검증 보류 상태로 등록되었다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABtElEQVQoz31Ty26cQBDk/++Rckw+IqcoB0uO5FOUW6ysnOyyCwQWmAGG4U25a/A4u5a1SKXueVBdXQ1B3/eY5xnTNF1hHEcXL8/8HuMwDFexqipkWYYgiiIcDgfEcYzT6YTj8fiaXyIMQweeR1GMsixhjEHTNFBKo65rLMuCgJfIrJSC1tqB1Qi/3qDkpQb/khiHv0+OzBMaI5BorUVwPp9RFIWT/rZ1rq/2JO/bGlafpc3/FgzjjHHa7gUk82qokq14tTxjQe4x5z5VVnXjcqVKl+d1D9ONWNlymmZIkkRezJFK62maIs9z5LLmS/SYrWnJd7sd9vs9ohdfeUa/CQ53XVcEvZWKqoDRBWpdOoO9j23bukhvSMpiVMs1z9rWwAoYu65z9gTff2V4+F3gx58SYVaj0lvbl6BSquYkWWBrV2yRvNDSfm3gP7/g47cTPt1F+PA1xP1jid4a5xOnR2xKWqfQR8LaFp2QNP2MblzAxxH2A6e0TRTr7NrxYBuc/u1n3SD+OQ/tIJ/CSCxCujgCgi34v2B9uXwLw7xiWoTwtQK2g3c13CCislmIPt8n+PKzwDMHhZnwQCKoUwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"검증 화면 2\"\n        title=\"검증 화면 2\"\n        src=\"/static/24dc2e0bdc5b9b882a55297b3f96e4a7/5a190/aws-route-53-14.png\"\n        srcset=\"/static/24dc2e0bdc5b9b882a55297b3f96e4a7/772e8/aws-route-53-14.png 200w,\n/static/24dc2e0bdc5b9b882a55297b3f96e4a7/e17e5/aws-route-53-14.png 400w,\n/static/24dc2e0bdc5b9b882a55297b3f96e4a7/5a190/aws-route-53-14.png 800w,\n/static/24dc2e0bdc5b9b882a55297b3f96e4a7/72aae/aws-route-53-14.png 964w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">검증 화면 2</figcaption>\n  </figure></p>\n<p>도메인 앞의 화살표 버튼을 누르면 CNAME 레코드 항목을 추가하라는 화면이 출력된다. Route 53에 등록한 도메인은 Route 53에서 레코드 생성 버튼을 클릭하여 자동으로 CNAME 레코드 항목을 생성할 수 있다. Route 53에서 레코드 생성 버튼을 클릭한다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAA70lEQVQoz6WS3WqDQBCF9/0fog/Q+9zlFQq9024oGlEC6vqP/+tpzgTLUpqEUuFjZmfHmTOjyvd9eJ4H2iAIEMcxkiQR+xtRFN0lDEOosiyRZRmMMaiqCnVdI89zFEUhPu8Zp+V5WZaHqHmesa4rpmmSgLVWzoT+tm1id//Zo6imaRpR2LYtxnHEMAzfUFXf9+Lzvus6yXdhjDlsqnhI01RG5OhswOKMUz3jLESfu+WemLevaRfECa3dbiOz+k+oiGp3xa5yvuMi65pHrFcUu3Ppf4EfyKW+xs4Xg8/EQGmt5Zf5Dyf9gdfjO14Ob/gCsJheHTjXf6gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Route 53에서 레코드 생성\"\n        title=\"Route 53에서 레코드 생성\"\n        src=\"/static/38d298a0497d1589b28d99dcfd499c67/5a190/aws-route-53-15.png\"\n        srcset=\"/static/38d298a0497d1589b28d99dcfd499c67/772e8/aws-route-53-15.png 200w,\n/static/38d298a0497d1589b28d99dcfd499c67/e17e5/aws-route-53-15.png 400w,\n/static/38d298a0497d1589b28d99dcfd499c67/5a190/aws-route-53-15.png 800w,\n/static/38d298a0497d1589b28d99dcfd499c67/dc61a/aws-route-53-15.png 1147w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Route 53에서 레코드 생성</figcaption>\n  </figure></p>\n<p>생성 버튼을 클릭한다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.999999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAYklEQVQI111L2w6DIAz1/79zC7TUtiBB4x6OgMuW+HCuPV2kJbzLC7RFlCPDd4c362pT88gPWLPv5t/l/rudBcsgbYqgAZJlgozAxiAlSBGwM5Kn2Q0f13hvnH83rYr6qbgAO1SYD/eWq3sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Route 53에서 레코드 생성 성공\"\n        title=\"Route 53에서 레코드 생성 성공\"\n        src=\"/static/2aa44fb93c75b3d27816b9437f1f6319/5a190/aws-route-53-16.png\"\n        srcset=\"/static/2aa44fb93c75b3d27816b9437f1f6319/772e8/aws-route-53-16.png 200w,\n/static/2aa44fb93c75b3d27816b9437f1f6319/e17e5/aws-route-53-16.png 400w,\n/static/2aa44fb93c75b3d27816b9437f1f6319/5a190/aws-route-53-16.png 800w,\n/static/2aa44fb93c75b3d27816b9437f1f6319/0f67e/aws-route-53-16.png 921w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Route 53에서 레코드 생성 성공</figcaption>\n  </figure></p>\n<p>성공 메시지가 뜨면 완료가 된 것이다. 검증이 완료 되려면 최대 30분 정도 걸릴 수 있다고 했지만 체감상 1 ~ 2분 걸렸던 것 같다.</p>\n<h2>CloudFront 커스텀 도메인 설정</h2>\n<p>저번에 현재 진행하고 있는 <a href=\"/2020-07-26-etc-aws-s3-hosting/\">사이드 프로젝트를 S3에 업로드 한 후 CloudFront 설정</a>까지 했었다. CloudFront를 사용하여 S3에 올라가있는 웹페이지에 커스텀 도메인을 연결해보자.</p>\n<p>AWS 서비스 메뉴에서 CloudFront를 검색하여 해당 서비스로 이동하면 CloudFront Distributions 목록을 확인할 수 있다. 도메인 연결을 원하는 Distribution 항목의 ID를 클릭하여 상세 페이지로 이동한 후 General 탭에 있는 Edit 버튼을 눌러 편집 화면으로 이동할 수 있다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABMElEQVQoz42SiY6DMAxE+f/fq6oKAgSWI9zQAi2XmK1dBXW7sNpII1uJ9Dy2Y5imifP5jNPpBCEE/nPWdT18M4qiQJ7nqKoKvu+j73vW9Xrd1DQNxnHEMAyY5/lPqKETgtR1jdvthjAMUZblBqR7AnZdx1EDP7UBCUZOCZQkCTu+3++/qtOddng0CkPTp2liYJZl7C6OY4anacqRClLLj8eD46d0IUNbfbcdRRGklLBtG47jcFRKcSECU1ESdaJzMrS1zLAXFssziVQG35Pw5EthEPAcaTk007Ztf7gj1yQaifHe/+ZQpbiYNoTjwXZ9mMKF60oeAzmkxWnAu2gXu0CVN3D8BG6QQngKlozR9gO/6dYO/+EeMCkaWLaEsMzn3/QQBF+IngujVpdl2f0yWt/FLwRVQe7yEAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"클라우드 프론트 커스텀 도메인 설정\"\n        title=\"클라우드 프론트 커스텀 도메인 설정\"\n        src=\"/static/340730d13f2ff6863683b8d297c2f56b/5a190/aws-route-53-17.png\"\n        srcset=\"/static/340730d13f2ff6863683b8d297c2f56b/772e8/aws-route-53-17.png 200w,\n/static/340730d13f2ff6863683b8d297c2f56b/e17e5/aws-route-53-17.png 400w,\n/static/340730d13f2ff6863683b8d297c2f56b/5a190/aws-route-53-17.png 800w,\n/static/340730d13f2ff6863683b8d297c2f56b/97bfd/aws-route-53-17.png 1078w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">클라우드 프론트 커스텀 도메인 설정</figcaption>\n  </figure></p>\n<p>Alternate Domain Names 항목에서 Route 53에 등록된 도메인을 입력한다. SSL Certificate 항목에서 Custom SSL Certificate 항목을 선택하고 인증서를 선택한 후 스크롤을 쭉 내려 Edit 버튼을 클릭해주면 도메인 연결이 끝난다.</p>\n<p>CloudFront에서 ssl 인증서를 적용하려면 미국 동부(버지니아 북부, us-east-1) 리전에도 SSL 인증서가 있어야 한다. 다행히 Certificate Manager 서비스는 무료이므로 미국 동부 리전을 선택한 후 Certificate Manager 서비스로 똑같이은 방법으로 SSL 인증서를 발급받을 수 있다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAACDUlEQVQ4y+2Uv27TUBTGU3gB2EBCgoXRUljpyqt0ZADEwJAngIUXaDYWhi6oUpsIFdtxmxg7gTgO1C31/zikcRy7Sdo49uHG/+RUKYrDypE+Hfne8/302dd2LoeK2tl5uFv+mMePaOzwsIY1uTbGIdUbTaxC1bDPBxUMJ6sYThwtiKToQESllkczj3JxSRz3qT/UwTjvXfZ65+5oNHKn06k78zzXHAxdWe24utFztc7vBal611U149KyL0CU1FLMu/2d+1E2+w6cnkrez+Nf0Godg3AigqIYICsdkGQdzkQt6GkJggg8L3jdbh/abYFIgKV9fL9a/QYEXnPrLO836m1/3hmm5bORWtwJ6nxyPd+n6aZfIb+6DMNDuUR8SYCWNShBWDO4oRimAegxLNsKPLZt4wnQNM0A6Pv+AtDzvKB3dAM2nz4DWVYW1tF84rEsazkwGgoUG9+9fQ/37z0GjuPDSLMZpOb+DryeTtN0uHvnATzJb8JkMkkng7RnBWBoGAws2Np6Dq9evoHxeJwA41oZGJsU9NqQBI3eABpkSVs/YWywhw6IZyqC6egkL9YHXr+1m9YyJwxPO1R6ba2EaXMaslbCVes/cOm3nLWWAvci4FUEzaKrCHiQ+h9aJPxjOY5Dx8BbBEG8YFn2A03T20jFjNqeeymKeo1YG7lCoZCA52mjnkWxJ1csFjf+ADoYxN9OL69IAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"커스텀 도메인 설정 완료\"\n        title=\"커스텀 도메인 설정 완료\"\n        src=\"/static/3ba29eaea8eebf92720341188e2a9152/5a190/aws-route-53-18.png\"\n        srcset=\"/static/3ba29eaea8eebf92720341188e2a9152/772e8/aws-route-53-18.png 200w,\n/static/3ba29eaea8eebf92720341188e2a9152/e17e5/aws-route-53-18.png 400w,\n/static/3ba29eaea8eebf92720341188e2a9152/5a190/aws-route-53-18.png 800w,\n/static/3ba29eaea8eebf92720341188e2a9152/c1b63/aws-route-53-18.png 1200w,\n/static/3ba29eaea8eebf92720341188e2a9152/29007/aws-route-53-18.png 1600w,\n/static/3ba29eaea8eebf92720341188e2a9152/56e36/aws-route-53-18.png 1750w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">커스텀 도메인 설정 완료</figcaption>\n  </figure></p>\n<p>약 1분이 지난후 웹브라우저 url에 커스텀 도메인을 입력하면 접속이 잘 되는 것을 확인할 수 있다.</p>\n<h2>API Gateway 도메인 설정 (feat. Serverless)</h2>\n<p>AWS에서 제공하는 Lambda와 API Gateway 서비스를 같이 사용하면 서버리스 아키텍처로 백엔드 서버를 운영할 수 있다. Serverless 프레임워크를 사용하면 아주 간편하게 Lambda 작성 및 배포까지 가능한데 serverless-domain-manager 플러그인을 추가로 사용하면 커스텀 도메인 설정까지 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">acm:ListCertificates                *\napigateway:GET                      /domainnames/*\napigateway:GET                      /domainnames/*/basepathmappings\napigateway:DELETE                   /domainnames/*\napigateway:POST                     /domainnames\napigateway:POST                     /domainnames/*/basepathmappings\napigateway:PATCH                    /domainnames/*/basepathmapping\ncloudformation:GET                  *\ncloudfront:UpdateDistribution       *\nroute53:ListHostedZones             *\nroute53:ChangeResourceRecordSets    hostedzone/{HostedZoneId}\nroute53:GetHostedZone               *\nroute53:ListResourceRecordSets      *\niam:CreateServiceLinkedRole         arn:aws:iam::${AWS::AccountId}: role/aws-service-role/ops.ap</code></pre></div>\n<p>serverless-domain-manager 플러그인을 사용하려면 Serverless에 연동되어 있는 IAM 권한에 위의 권한이 추가로 더 필요하다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 719px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABWUlEQVQoz62STW6DMBCFuWzP1G3XPUQvUKm7kFatWmIo2MR/gMFAAq+Dk6wSqRUq0pMBjT+/eePo/inH3cM7Hp811jy5GZDpPqzjcUaUFAYvW4bNB0NVVaibBnXdoKHVWgshBLTW4fuWpKmw1yRl4doWkVES23iD1+0GWcpQCh4kSIwxxHGMJEkCuCiKKwl+quX0boxBZKsa7PMNtmpgGg9pHUrj0LQevffBRXBe1xiGAX3f31TXdUHRYaIg6gy8VPgqO2Sqg3G0cZyo0CPPc2RZBillyGyapivN8xwOc84hGog4GkYZGDDpwY2H82MoWk6+tLrkuPz7FTgS8GBSSG2QKo9vcpjKliY2BSCnjFYBLw6XlhdoPx6p6B+A6b4NDkOOlCHna1tWp5YX2KKCsmw7vzJDm6KUZ4cEY+RSWE/XYC2Qpiz2Gjt5GsruDPTehwyXq6OU+hPwB3VKmcdNL/IpAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"IAM 권한 설정\"\n        title=\"IAM 권한 설정\"\n        src=\"/static/7aa52554500724bc42f4e19c0c39c3cf/073e9/aws-route-53-19.png\"\n        srcset=\"/static/7aa52554500724bc42f4e19c0c39c3cf/772e8/aws-route-53-19.png 200w,\n/static/7aa52554500724bc42f4e19c0c39c3cf/e17e5/aws-route-53-19.png 400w,\n/static/7aa52554500724bc42f4e19c0c39c3cf/073e9/aws-route-53-19.png 719w\"\n        sizes=\"(max-width: 719px) 100vw, 719px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">IAM 권한 설정</figcaption>\n  </figure></p>\n<p>일단은 관련된 권한을 찾은 후 FullAccess 권한을 주긴 했는데 좀 더 안전한 보안을 위해서 나중에 다시 수정할 예정이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install serverless-domain-manager --save-dev</code></pre></div>\n<p>serverless-domain-manager 플러그인을 설치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> serverless<span class=\"token punctuation\">-</span>webpack\n  <span class=\"token punctuation\">-</span> serverless<span class=\"token punctuation\">-</span>offline\n  <span class=\"token punctuation\">-</span> serverless<span class=\"token punctuation\">-</span>dotenv<span class=\"token punctuation\">-</span>plugin\n  <span class=\"token punctuation\">-</span> serverless<span class=\"token punctuation\">-</span>domain<span class=\"token punctuation\">-</span>manager\n\n<span class=\"token key atrule\">custom</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">customDomain</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">domainName</span><span class=\"token punctuation\">:</span> api.wolfonair.com\n    <span class=\"token key atrule\">stage</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>provider.stage<span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">certificateName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"*.wolfonair.com\"</span>\n    <span class=\"token key atrule\">createRoute53Record</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">endpointType</span><span class=\"token punctuation\">:</span> regional\n    <span class=\"token key atrule\">securityPolicy</span><span class=\"token punctuation\">:</span> tls_1_2\n    <span class=\"token key atrule\">apiType</span><span class=\"token punctuation\">:</span> rest</code></pre></div>\n<p>serverless.yml파일에서 plugins 항목에는 serverless-domain-manager을 추가해주고 custom 항목에는 coustomDomain 설정을 추가로 넣어준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sls create_domain\nsls deploy</code></pre></div>\n<p>위의 명령어를 실행해주면 도메인 설정이 끝난다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABSklEQVQoz5WSiXKDMAxE+f9fbJuGQDmScNkGcxg2kgIpYegRZnbssc3T6vCKskSanuGcQ2Mt4qxEQrpmGZLzGXyvtH5SpdST1nceQ1jD4NAPA3zfx+FwwOfxiLf3D5yCUB6WVSXwLWAbwLMEa9sW0zSh73tymyIIQ1wuV3mc5YWsURQhDL9QEXigwF3XPcQgDqgUOcTqk0ttUNeNBHHjiIFKYYyBfwrkBy7NTx8H8tgZawEWyiAv7ql15JjFAXJyWte1BBlJzs2a9wKkYE/AdravydGjNvPKjWsaLk8n7q1lWVjacw/GcRL3kvIaWO50T1MZ2OHy7teUt8C9LhpTk7sGy9s93YHuD6D6dsgjww72XL4ErLSSLsdJioTqWBKYAyiuNa3coH8Dlz03KYpigWzTfqmGa2AcJ5K25vNK3d3TMPNA8xlPAHf5BliJpAOVuQ4pAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"API Gateway 사용자 지정 도메인 이름\"\n        title=\"API Gateway 사용자 지정 도메인 이름\"\n        src=\"/static/51fe57fb2bd307ae9a63b7347ed398b0/5a190/aws-route-53-20.png\"\n        srcset=\"/static/51fe57fb2bd307ae9a63b7347ed398b0/772e8/aws-route-53-20.png 200w,\n/static/51fe57fb2bd307ae9a63b7347ed398b0/e17e5/aws-route-53-20.png 400w,\n/static/51fe57fb2bd307ae9a63b7347ed398b0/5a190/aws-route-53-20.png 800w,\n/static/51fe57fb2bd307ae9a63b7347ed398b0/c1b63/aws-route-53-20.png 1200w,\n/static/51fe57fb2bd307ae9a63b7347ed398b0/29007/aws-route-53-20.png 1600w,\n/static/51fe57fb2bd307ae9a63b7347ed398b0/6cb28/aws-route-53-20.png 2430w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">API Gateway 사용자 지정 도메인 이름</figcaption>\n  </figure></p>\n<p>AWS API Gateway 서비스에 직접 들어가 사용자 지정 도메인 이름 항목을 클릭해보면 도메인이 정상 등록 된 것을 확인할 수 있다.</p>\n<h2>마무리</h2>\n<p>이렇게 Route 53을 이용하여 도메인을 등록하고 Certificate Manager를 이용하여 SSL 인증서 까지 발급받은 후 CloudFront, API Gateway에 도메인 연결까지 해보았다. Ec2에도 SSL 인증서를 적용하여 커스텀 도메인을 달고 싶었는데 ELB를 사용하여 좀 편하게 SSL 인증서를 적용하려 했더니 ELB가 따로 프리티어를 제공하질 않는다는걸 알고 일단은 잠시 보류하기로 했다. 다음에 시간이 날때 무료 SSL 인증서를 이용하여 Ec2에 https를 적용한 커스텀 도메인을 달아봐야겠다.</p>\n<h2>Reference</h2>\n<blockquote>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=Nr7nLwfvT3Y\">Amazon Route53 101 - 서태호 | 강남비기너모임 : AWS Community Day</a></li>\n<li><a href=\"https://xetown.com/topics/1125037\">많이 혼돈하시는 네임서버와 DNS</a></li>\n<li><a href=\"https://velog.io/@minholee_93/AWS-Route-53-DNS-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-8lk40vfqt4#2-route-53-%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0\">AWS Route 53 DNS 서비스 사용하기</a></li>\n<li><a href=\"https://musma.github.io/2019/09/16/what-to-do-after-you-buy-your-new-domain-on-aws.html#aws-certificate-manager-ssltls-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%B0%9C%EA%B8%89\">새 도메인 이름 구입한 후 AWS에서 해야할 일</a></li>\n<li><a href=\"https://react-etc.vlpt.us/08.deploy-s3.html\">리액트 앱 AWS S3, CloudFront 에 배포하기</a></li>\n<li><a href=\"https://www.serverless.com/plugins/serverless-domain-manager\">Serverless Domain Manager</a></li>\n</ul>\n</blockquote>","frontmatter":{"title":"AWS 도메인 설정","date":"2020년 08월 30일"},"fields":{"slug":"/2020-08-30-etc-aws-route-53/"}}},"pageContext":{"slug":"/2020-08-30-etc-aws-route-53/"}}}