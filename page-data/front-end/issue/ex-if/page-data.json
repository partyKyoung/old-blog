{"componentChunkName":"component---src-templates-blog-template-tsx","path":"/front-end/issue/ex-if","webpackCompilationHash":"26a80cebaa4a88426797","result":{"data":{"markdownRemark":{"html":"<p>회사에서 열심히 일을 하던 도중 이슈가 하나 생겼다. 폰으로 사진 파일을 업로드 하면 어떤 사진들은 이미지 방향이 자꾸 돌아가서 업로드 되는 것이었다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1b67f28f09b6660943c4efef9631f004/f2cb1/javascript-memo-exif-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 140.64171122994654%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이렇게 이미지 뷰어나 앨범에서 보면 제대로 출력되는 사진들이\"\n        title=\"이렇게 이미지 뷰어나 앨범에서 보면 제대로 출력되는 사진들이\"\n        src=\"/static/1b67f28f09b6660943c4efef9631f004/b9e4f/javascript-memo-exif-1.png\"\n        srcset=\"/static/1b67f28f09b6660943c4efef9631f004/cf440/javascript-memo-exif-1.png 148w,\n/static/1b67f28f09b6660943c4efef9631f004/d2d38/javascript-memo-exif-1.png 295w,\n/static/1b67f28f09b6660943c4efef9631f004/b9e4f/javascript-memo-exif-1.png 590w,\n/static/1b67f28f09b6660943c4efef9631f004/f9b6a/javascript-memo-exif-1.png 885w,\n/static/1b67f28f09b6660943c4efef9631f004/f2cb1/javascript-memo-exif-1.png 1122w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">이렇게 이미지 뷰어나 앨범에서 보면 제대로 출력되는 사진들이</figcaption>\n  </figure>\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/625719c62fa92f2a941b08f9a8efa550/e198c/javascript-memo-exif-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 99.75550122249389%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAFWUlEQVQ4yx2S22/T5x3G/Q/sZtIGIrgBJz47Pp/Ph9iJ41OcONiOk9hNHB9iAyEFm2MEXcIhHW2BUtoFVMQoO2QCKZVou61K6WBotKpg07ZOG61UrZvWm6lX1Xrz6bte/C6++r3v8z7fz/NIDhztEEoOM5TNMDSaIjOZJVfJMdXIsXKtztILU0zvHyNfzTC3lOfZToFiO0+hPUG6nGakkGZsZoJMMcmJlWNIYtkE3+v5IT+QSfn+M9vZruihRy3FFlcyfdhJtKgltEeHwiFFYd+BLSrHOz6AelCO1Cplm7IHmaWfHtV2yvNFJKNTebYpdrFrQEWvTkmvVo4xoEVhk+Mf0ws3HuIlM6UDHqITFvRONa5RE+aEjn6HAoWYtT4NGnGvVp9FkhaCO9QyZAYNUq2S3XoFGpcSlTjcb+lD6e7HkVISyumIFS2YxWPWuAljXI8mqELhVqMPOdBp+qnWykhSxXF6NH3fuetR9yMVPxRWOYawGvOQEt8eNcmGEcuQEB4Rc0LL8LgDR9qAKalD7dFi9rjRCo3ZuSnhMJ9lp2o3UiG2UyVDqtqF1qtgdMFO5aibAy+HSdZMJOaMzJ8IkFtwM1S2o4uqUAb60Xu1OOwGBsxyZhcFw1QhS+9AH30GNb0aOc8Icb1fx2jDxVjTymjLRLZuIlU2EinpKXcDgqsPU0qHYUSDIaTB53Vg8ZqZOziDJDsjQlH2stuoRmYWkAU775gZZ8YgnJlpnfORbujwjgrXYl5+Pc7s4QgeEZRjQnzDJiJBJ1qnnFKjgKTQmKbPpkHlMqHyGLAlTOjDWsIlE+Ginvqqn1fuZli5OcjShQDPnvIwNGul36ZAaZfji1rxuYVw0Ey1JVIuVPMiLTWBop98N4Y/b8WeMOLKDhAqGWiuuXn93Qyrb8ZZvBCkfcYnWIaxhPTIdu+it68XvV6F2TZAa/+86GE+R2TaxMGrSebOxGi+FOb8ZoaX7yY5fiNE6biNdNNEvGIU6we59naOy3fyxCedKFUKtu3cgUYEajUpma9NI2l2KizfSrL+aIbuGxlGml46VyOcvBWlftZD9aSb6KSOyISOfULwp1tF5tt+BmS9GJQyNKo+vE4zFquSSlPUpt2psXR5mBuPy6z/vsTp22n2XYwyt+KnfTZE67Sf7sUI1eMu6qccnL+VIp+3sKdiITFpIyDYRYNuLC6dqI0odmm+IqLXsv5wkrW3U9x8XODw9Sh7L/ooHDMzfcQhUjYyd8LN4jk/N7fy3Lo/zeqNLOmWB1/QQlDUxu7W0TpYRdI62iCWj/HaVoMf/3qcc3dHOHJ9kO5PwqxsxCifsDM8a2B4xsjZ9SQf/rPK7YdlNt5bYLztJRC2Ew17sFrV7O+IUDa33uLs1fNc+c0Cl7b2cOWDcV56J83SK4O0zweYOmoXF21MdVwcuzjE/adzvP+XMvf+1CEnWPr8NgZDLlyOAfYuCcEvvvovmw/u8+aj5zm9meANsXr32jCnN9LM/8hP5aSH8X12wnk92aqdDz5u8bd/7+fhZ1UWlqNiZcd3xfaILi4eaiD56puv+eQ/T/nVR2uC3zS/eFLm1M/iLKxFKR7yC4ZBMnUHuZaTgxcGefCkxT++OMTnX3a5dGWKwWEviZifSNjJc90FIfi/r/nrv57w4OkGd/5e49XfpVm9k2Ks4yTetDA4ayQ2q2fvC35e3Ixy+1GO3/6xxKefNzm1HMfm0RPxW7H9n+FSDcnDx4/YePcd3tra4N6nZ3jv6Sq3P1ph5foiRy7VeW6txup6m1/eW+bn73f5w2crfPLlGo//vMry821qrSqHDjRZqFe4/NqLfAvZYDP/U+mFzQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이런식으로 이미지가 돌아가서 나온다\"\n        title=\"이런식으로 이미지가 돌아가서 나온다\"\n        src=\"/static/625719c62fa92f2a941b08f9a8efa550/b9e4f/javascript-memo-exif-2.png\"\n        srcset=\"/static/625719c62fa92f2a941b08f9a8efa550/cf440/javascript-memo-exif-2.png 148w,\n/static/625719c62fa92f2a941b08f9a8efa550/d2d38/javascript-memo-exif-2.png 295w,\n/static/625719c62fa92f2a941b08f9a8efa550/b9e4f/javascript-memo-exif-2.png 590w,\n/static/625719c62fa92f2a941b08f9a8efa550/e198c/javascript-memo-exif-2.png 818w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">이런식으로 이미지가 돌아가서 나온다</figcaption>\n  </figure></p>\n<p>사실 좀 귀찮기도 하고 어떻게 고칠지 막막하기도 해서 그냥 냅두고 싶었지만 그러면 절대 안되기 때문에 우여곡절 어떻게든 방법을 찾아서 해결 했는데 그 과정을 공유해보고자 한다.</p>\n<h2>원인</h2>\n<p>카메라로 사진을 찍으면 메타데이터로 exif 값이 저장된다. 이 exif 는 디지털 카메라에서 이용되는 이미지 파일 포맷인데 여기에 orientation 이라고 사진의 방향 값이 저장되어 있다.</p>\n<p><img src=\"../images/frontend/javascript-memo-exif-4.gif\" alt=\"exif orientation\"></p>\n<p><a href=\"https://github.com/exif-js/exif-js\">exif-js</a> 오픈소스를 사용하면 exif 데이터를 읽어올 수 있길래 한번 써보았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getExif</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> imageViewer <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"imageViewer\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> image <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n\n  reader<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">EXIF</span><span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tags <span class=\"token operator\">=</span> <span class=\"token constant\">EXIF</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAllTags</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">)</span>\n\n      <span class=\"token comment\">// metadata 출력</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>tags<span class=\"token punctuation\">)</span>\n\n      <span class=\"token comment\">// 이미지 미리보기</span>\n      imageViewer<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundImage <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`url(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>result<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  reader<span class=\"token punctuation\">.</span><span class=\"token function\">readAsDataURL</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3c61a08cff036eddd4fe273380f44a71/2e6ac/javascript-memo-exif-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.75703324808184%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAADPklEQVQ4y5WT228UVRzH96/whRgupUBpO9ti2+3WsoBtoUuURRNFoDWFBOQBQWJMrYmSGONDE0l48MX4oA8a39UWU4I2MfHB53ppt2V39jK7c9udWdjduex+PLPYWh/A5STf+Z75nZlvvr/LCY0nTiJFBxl6YYSzVye58F6c+OsxTs2McXzqGJETzxM9PsxPy3cJlu/7PGmFpNEhntm7k11SB13RDkZPH2TsTA/9Rw8gTXSxJ9JJZ88e7iz+0J7gwLERdhzoYLe0l9grEicuhBk/LxE/N0jkpTA9R3qR+g/y41LbglF27N/NvsF9JK5EmJ6NMDndK1I/wuFz/QxOhDk03M3Cve/bExyejNEVkxh6sZ/o6V6u34rxwRdjXP7oMNFEH+FINwPRXhaXFtoTPHvtJFduxbn0yTjvfHaUizejzMyNMP91gnhigJ3P7qKvbz9Ld+/8I+jRbDYfi9CbN09x++eXmftqgsvzw0zPPceZt8N8/Pk4r80cIjrajdTXycLSdy3BRuN/HN748AZfLr8rcJX5by4yd/s873/6Bou/zfLtvVkuvTXF9NSr/PLrcuuHer2O53l4rtNi13X/jQmEMhkZOZPnrw0ZVVdR1QK5nIJpGpRKJpqqYRiGeBd7TSOZTJJOpVlN5VnfuI8sy+TzCuWyhWVZhKoPqxSTGsU1g7JeFiIlcVCmUrGxbVuk2NhKJ6iR49QFHGqOR13sXeE0KMOWQ99roP6uoa1kMRUT06hSq7lUbEcI1qlVfaoC9XoDR8BzET82cZ2m2AsWCM4CdkRMCPoYSSG0rlDJZXGE482PHsFvwXEEBLtugEdxZ1t8k0PNRpNS2kJf1SkpD7Ds7T1r8rSrJaivGqgrGuq6SSln4tuWqNd/a9cuQsGjlCpjCLFKRqEqumYlU9hyHi9oiij0puh2fqzDoIbqHzrFlSKmrJGTH5LLOCg50ZRSTSg0CDTadhiMReDQvF+inLUop3LUxcwFpfD95lOnveVQ+9NATxewCzq2omBruhgfjweVCsGsbhd/YsrB1dHF2CirBdbXNsStKZLJFkiLWmYFr62tkpEzFIuiaaraQnBzgltjmmXBwowWxG103eJv0ZQiucrE6bEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"확인해보면 orientation값이 6으로 되어있다.\"\n        title=\"확인해보면 orientation값이 6으로 되어있다.\"\n        src=\"/static/3c61a08cff036eddd4fe273380f44a71/b9e4f/javascript-memo-exif-3.png\"\n        srcset=\"/static/3c61a08cff036eddd4fe273380f44a71/cf440/javascript-memo-exif-3.png 148w,\n/static/3c61a08cff036eddd4fe273380f44a71/d2d38/javascript-memo-exif-3.png 295w,\n/static/3c61a08cff036eddd4fe273380f44a71/b9e4f/javascript-memo-exif-3.png 590w,\n/static/3c61a08cff036eddd4fe273380f44a71/f9b6a/javascript-memo-exif-3.png 885w,\n/static/3c61a08cff036eddd4fe273380f44a71/2d849/javascript-memo-exif-3.png 1180w,\n/static/3c61a08cff036eddd4fe273380f44a71/2e6ac/javascript-memo-exif-3.png 1564w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">확인해보면 orientation값이 6으로 되어있다.</figcaption>\n  </figure></p>\n<h2>해결 방법</h2>\n<p>대표님이 세가지 솔루션을 제시해주셨다.</p>\n<ol>\n<li>client 단에서 업로드시 orientation 값 기준으로 수정하여 서버에 업로드</li>\n<li>server 단에서 업로드 후 rotation 처리</li>\n<li>보여줄때 그때마다 rotation 처리해 주는 방식</li>\n</ol>\n<p>여기서 <a href=\"https://github.com/blueimp/JavaScript-Load-Image\">JavaScript-Load-Image</a> 오픈소스를 사용하면 첫번째 방법으로 해결이 될것 같아서 첫번째 방법으로 문제를 해결하기로 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">fixRotationOfFile</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> image <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token function\">loadImage</span><span class=\"token punctuation\">(</span>\n    image<span class=\"token punctuation\">,</span>\n    <span class=\"token parameter\">img</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> imageViewer <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"imageViewer\"</span><span class=\"token punctuation\">)</span>\n\n      imageViewer<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> maxWidth<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span> orientation<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8fde46600b719ca3dfea65658ca83088/7e0ae/javascript-memo-exif-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 141.78743961352657%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"정방향으로 출력되는 이미지\"\n        title=\"정방향으로 출력되는 이미지\"\n        src=\"/static/8fde46600b719ca3dfea65658ca83088/b9e4f/javascript-memo-exif-4.png\"\n        srcset=\"/static/8fde46600b719ca3dfea65658ca83088/cf440/javascript-memo-exif-4.png 148w,\n/static/8fde46600b719ca3dfea65658ca83088/d2d38/javascript-memo-exif-4.png 295w,\n/static/8fde46600b719ca3dfea65658ca83088/b9e4f/javascript-memo-exif-4.png 590w,\n/static/8fde46600b719ca3dfea65658ca83088/7e0ae/javascript-memo-exif-4.png 828w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">정방향으로 출력되는 이미지</figcaption>\n  </figure>\n이렇게 하면 이미지가 정뱡향으로 출력된다!</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> image <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> fileType <span class=\"token operator\">=</span> image<span class=\"token punctuation\">.</span>type\n\n  <span class=\"token function\">loadImage</span><span class=\"token punctuation\">(</span>\n    file<span class=\"token punctuation\">,</span>\n    <span class=\"token parameter\">img</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">//</span>\n      img<span class=\"token punctuation\">.</span><span class=\"token function\">toBlob</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">blob</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> createdFile <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>blob<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">// 이미지 업로드 실행은 여기서</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> fileType<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> orientation<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위의 코드와 같은 식으로 정방향으로 출력된 blob 이미지를 file 로 바꾸어 이미지를 업로드 하는 식으로 해결했다.</p>\n<h2>마무리</h2>\n<p>AWS S3 및 몇몇 서비스에서는 원본을 그대로 두고 이미지가 출력될 때마다 rotation 처리를 해주는 방식을 사용한 것 같던데 나중에 기회가 된다면 이미지가 출력될 때마다 rotation 처리를 해주는 방식 으로도 한번 해결해보고 싶다.</p>","frontmatter":{"date":"2018년 07월 11일","description":"이미지 exif에 대한 이슈를 js 모듈로 해결하는 방법 입니다.","path":"/front-end/issue/ex-if","title":"javascript로 사진 똑바로 만들기"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}